From 62cd4490ad9dc8038fdb06724dba81833b851afe Mon Sep 17 00:00:00 2001
From: tanbangcheng <tanbangcheng@baicells.com>
Date: Fri, 24 Nov 2017 21:57:05 +0800
Subject: [PATCH] Remove unnecessary code of DefaultOvsdbClient.

Change-Id: Icad49d7b7a352b6cf29d97ec217c2cc9e85ce5b2
---
 .../controller/driver/DefaultOvsdbClient.java | 22 +++----------------
 1 file changed, 3 insertions(+), 19 deletions(-)

diff --git a/protocols/ovsdb/api/src/main/java/org/onosproject/ovsdb/controller/driver/DefaultOvsdbClient.java b/protocols/ovsdb/api/src/main/java/org/onosproject/ovsdb/controller/driver/DefaultOvsdbClient.java
index e1f916f631..ce9bb2130a 100644
--- a/protocols/ovsdb/api/src/main/java/org/onosproject/ovsdb/controller/driver/DefaultOvsdbClient.java
+++ b/protocols/ovsdb/api/src/main/java/org/onosproject/ovsdb/controller/driver/DefaultOvsdbClient.java
@@ -534,15 +534,12 @@ public class DefaultOvsdbClient implements OvsdbProviderService, OvsdbClientServ
             return;
         }
 
-        Set<Uuid> newControllerUuids = new HashSet<>();
-
         Set<ControllerInfo> newControllers = new HashSet<>(controllers);
         List<Controller> removeControllers = new ArrayList<>();
         oldControllers.forEach(controller -> {
             ControllerInfo controllerInfo = new ControllerInfo((String) controller.getTargetColumn().data());
             if (newControllers.contains(controllerInfo)) {
                 newControllers.remove(controllerInfo);
-                newControllerUuids.add(controller.getRow().uuid());
             } else {
                 removeControllers.add(controller);
             }
@@ -560,23 +557,10 @@ public class DefaultOvsdbClient implements OvsdbProviderService, OvsdbClientServ
                     .createTable(dbSchema, OvsdbTable.CONTROLLER);
             controller.setTarget(c.target());
             return controller;
-        }).forEach(c -> {
-            String uuid = insertConfig(CONTROLLER, UUID, BRIDGE, BRIDGE_CONTROLLER, bridgeUuid.value(),
-                                       c.getRow());
-            newControllerUuids.add(Uuid.uuid(uuid));
-
-        });
+        }).forEach(c -> insertConfig(CONTROLLER, UUID, BRIDGE, BRIDGE_CONTROLLER,
+                                    bridgeUuid.value(),
+                                    c.getRow()));
 
-        OvsdbRowStore rowStore = getRowStore(DATABASENAME, BRIDGE);
-        if (rowStore == null) {
-            log.debug("There is no bridge table");
-            return;
-        }
-
-        Row bridgeRow = rowStore.getRow(bridgeUuid.value());
-        Bridge bridge = (Bridge) TableGenerator.getTable(dbSchema, bridgeRow, OvsdbTable.BRIDGE);
-        bridge.setController(OvsdbSet.ovsdbSet(newControllerUuids));
-        updateConfig(BRIDGE, UUID, bridgeUuid.value(), bridge.getRow());
     }
 
     @Override
-- 
2.20.1 (Apple Git-117)

